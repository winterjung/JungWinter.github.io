---
layout: post
title: ì´ë²ˆ ì£¼ ê°œë°œ ë° ê³µë¶€ ì •ë¦¬ - 06/52
tags: [this-week, python, book]
---

í•˜ë£¨í•˜ë£¨ ì½”ë”©ì—ë§Œ ë§¤ë‹¬ë¦¬ë‹¤ë³´ë‹ˆ 5ì£¼ì°¨ ì •ë¦¬í•˜ëŠ”ê±¸ ê¹œë¹¡í–ˆë‹¤. ì‹¬ì§€ì–´ ì´ë²ˆ ì£¼ë„ ë„˜ì–´ê°ˆ ë»” í–ˆë‹¤. ìµœê·¼ì— íŒ©í† ë¦¬ì˜¤ë¼ëŠ” ê²Œì„ì„ ì‹œì‘í–ˆëŠ”ë° ë§¤ìš°ë§¤ìš° ì¬ë°Œë‹¤. íšŒì‚¬ë‹¤ë‹ˆëŠ” ì§€ì¸ë§ë¡œëŠ” ì§‘ì—ì„œë„ ì¼í•˜ëŠ” ê¸°ë¶„ì´ ë“œëŠ” ê²Œì„ì´ë¼ í–ˆì§€ë§Œ ë‚˜ëŠ” íšŒì‚¬ë¥¼ ì•ˆë‹¤ë‹ˆë‹ˆ ê·¸ëŸ¬ë ¤ë‹ˆ ì¬ë°Œê²Œ í•˜ê³ ìˆë‹¤.

## ê³µë¶€ ğŸ“–
- ëŸ¬ìŠ¤íŠ¸ ì½”ë”© ë°‹ì—…ì— ê°€ì„œ íŠœí† ë¦¬ì–¼ì„ í•´ë´¤ë‹¤. ì»´íŒŒì¼ì–¸ì–´ ë°±ë§Œë…„ë§Œì— í•´ë³´ëŠ”ë° ìŒ ë‚´ì·¨í–¥ì€ ì•„ë‹Œ ê²ƒ ê°™ë‹¤.
- [íŒŒì´ì¬ ì½”ë”©ì˜ ê¸°ìˆ ](http://www.gilbut.co.kr/book/bookView.aspx?bookcode=BN001430) ì±…ì„ ë‹¤ì‹œ í•œë²ˆ ì½ì—ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œì‘ì— ë„ì›€ì´ ë˜ëŠ” ì •ë³´ë¥¼ ëª‡ëª‡ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤.
- [ì‹¤ì „ íŒŒì´ì¬ í”„ë¡œê·¸ë˜ë°](http://www.insightbook.co.kr/book/programming-insight/%EC%8B%A4%EC%A0%84-%ED%8C%8C%EC%9D%B4%EC%8D%AC-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-2) ì±…ì„ ë‹¤ ì½ì—ˆë‹¤. ëª‡ ë‹¬ ì „ì— ë‚˜ê°”ë˜ íŒŒì´ì¡°ê·¸ì—ì„œ ê¹€ìŠ¬ë‹˜í•œí…Œ ë°›ì•˜ëŠ”ë° ì¤‘ê¸‰ íŒŒì´ì¬ ê°œë°œìí•œí…Œ ê¼­ í•„ìš”í•œ ë‚´ìš©ìœ¼ë¡œ ê°€ë“í–ˆê³  ê°œì¸ì ìœ¼ë¡œ ëŒ€ë§Œì¡±í–ˆë‹¤. ë•ë¶„ì— ë‹¹ì¥ ë„ì›€ì´ ë˜ëŠ” ì •ë³´ë„ ë§ì´ ì–»ì—ˆë‹¤.
- í•¨ìˆ˜í˜• íŒ¨ëŸ¬ë‹¤ì„ì„ ê³µë¶€í–ˆë‹¤. ì˜ˆì „ì—” ì¢€ ë§‰ì—°í–ˆë‹¤ë©´ ê³µë¶€í• ìˆ˜ë¡ ì ì  ì¬ë°Œì–´ì§„ë‹¤.

![](https://pbs.twimg.com/media/DUotIcvV4AIt3Y9.png)

- [Lazy method chaining in Python](http://derrickgilland.com/posts/lazy-method-chaining-in-python/) ì•„í‹°í´ì„ ë³´ë©° ë§ì€ ë„ì›€ì„ ì–»ì—ˆë‹¤. [ì¢€ë” ë°œì „ëœ í˜•íƒœ](http://derrickgilland.com/posts/late-value-passing-for-lazy-method-chaining-in-python/)ì™€ [ê¸°ëŠ¥ì„ ë” ì¶”ê°€í•œ í˜•íƒœ](http://derrickgilland.com/posts/reinitializing-chained-method-values-in-python/)ì— ëŒ€í•œ í›„ì† í¬ìŠ¤íŒ…ë„ ì½ì„ë§Œ í•˜ë‹¤.
- Python 3.7 dataclassë¥¼ collections.namedtuple, typing.NamedTupleê³¼ ë¹„êµí•´ë´¤ë‹¤.

![](https://pbs.twimg.com/media/DU2MXhnWAAA6qJ7.png)

## ê°œë°œ ğŸ–¥
### chatterbox ê°œë°œ
- [2ì£¼ê°„ì˜ ì»¤ë°‹ ê¸°ë¡](https://github.com/JungWinter/chatterbox/commits?author=JungWinter&since=2018-01-29T15:00:00Z&until=2018-02-11T15:00:00Z)ì—ì„œ ë³´ë“¯ ì§„ì§œ ì—´ì‹¬íˆ í–ˆë‹¤. ê·¸ë™ì•ˆ ê¸° ëª¨ìœ¼ë˜ê²Œ í•œë²ˆì— ë¹µ í„°ì§„ ëŠë‚Œ. í•˜ë£¨í•˜ë£¨ ì½”ë”©í•˜ëŠ”ê²Œ ë¬´ì²™ ì¬ë°Œì—ˆë‹¤.
- TDDì„ ì‹¤ì²œí•´ë´¤ëŠ”ë° ê²Œì„ ê°œë°œì—ì„  ëª¨ë¥´ê² ìœ¼ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œì—ì„œëŠ” í™•ì‹¤íˆ ë„ì›€ì´ ë˜ê³ ìˆë‹¤. Test caseë¥¼ ë¨¼ì € ì‘ì„±í•œ ë’¤ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ë„ë¡ ëª¨ë“ˆì„ ë§Œë“¤ê³  í†µê³¼í•˜ë©´ ë¦¬íŒ©í† ë§ì„ í•˜ëŠ”ë° ì´ ë¦¬íŒ©í† ë§ ê³¼ì •ì—ì„œ ë‚´ê°€ ì •í•œ í…ŒìŠ¤íŠ¸ì— ë²—ì–´ë‚˜ëŠ”ì§€ ì•Œë©´ì„œ ì‘ì—…í•˜ë‹ˆ ê±±ì •ì—†ì´ ì­‰ì­‰ ì½”ë”©í•  ìˆ˜ ìˆì—ˆë‹¤.

#### 2ì›” 1ì£¼
##### `route()` ë™ì‘ ë°©ì‹
`chatter.route()`ë¥¼ í†µí•´ ë°ì´í„°ê°€ ì „ë‹¬ë˜ë©´ ìƒíƒœ ë¨¸ì‹ ì´ ê·œì¹™ì— ë”°ë¼ ì ì ˆí•œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ `Response`ë¥¼ ë°˜í™˜í•œë‹¤. ì´ ë•Œ **ê·œì¹™ì— ë”°ë¥¸ ì ì ˆí•œ í•¨ìˆ˜ë¥¼ ì°¾ëŠ”ë°** ì¼ë‹¨ ë”•ì…”ë„ˆë¦¬ë¡œ êµ¬í˜„í–ˆê³  ê·œì¹™ ë„¤ì´ë°ì„ `'action_src_dest'`ê°™ì€ ì‹ìœ¼ë¡œ í–ˆìœ¼ë‚˜ ë§¤ìš° ëª»ë§ˆë•…í–ˆë‹¤. ì´ëŠ” ê²°êµ­ ë‚˜ì¤‘ì— ë°”ë€Œê²Œëœë‹¤.

##### [`__all__` ë²„ê·¸ í”½ìŠ¤](https://github.com/JungWinter/chatterbox/commit/e23c4ffcf93ffdc9e9141e6953e39a05588f0230)
`__init__.py`ì— í¬í•¨ë˜ëŠ” `__all__` ë¦¬ìŠ¤íŠ¸ëŠ” from chatterbox import * êµ¬ë¬¸ì„ ì‹¤í–‰í•  ë•Œ ì„í¬íŠ¸ë˜ëŠ” í´ë˜ìŠ¤ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“œëŠ”ê²Œ ì²˜ìŒì´ë‹¤ ë³´ë‹ˆ ê·œì¹™ì„ ëª°ëëŠ”ë° ì•Œê³ ë³´ë‹ˆ ë¦¬ìŠ¤íŠ¸ ì›ì†ŒëŠ” ë¬¸ìì—´ì´ì–´ì•¼ í–ˆë‹¤.

##### [ê¸°ì´ˆì ì¸ Response ë™ì‘ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤](https://github.com/JungWinter/chatterbox/blob/436da6e8552ef317dff887db0bc0123b101a77c6/tests/test_response.py)
chatterboxë¥¼ ë§Œë“¤ë©´ì„œ ì œì¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í–ˆë˜ê²Œ `chatter.route()`ê³  ê·¸ ë‹¤ìŒì´ `Text('ì•ˆë…•') + Keyboard(['ë²„íŠ¼1', 'ë²„íŠ¼ 2'])`ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” Response êµ¬í˜„ì´ì—ˆë‹¤. ì´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ í†µí•´ ë‚´ê°€ ì–´ë–¤ ë™ì‘ì„ ì›í•˜ê³  ìˆëŠ”ì§€ ë¨¼ì € ì •ì˜í•˜ê³  êµ¬í˜„ì— ë“¤ì–´ê°€ë‹ˆ í•œê²° ìˆ˜ì›”í–ˆë‹¤.

##### í•¨ìˆ˜í˜• íŒ¨ëŸ¬ë‹¤ì„ì„ ì ìš©ì‹œì¼œë³´ë‹¤
ë³¸ë˜ Messageì˜ í•˜ìœ„í´ë˜ìŠ¤ì¸ Text, Photo, MessageButtonì˜ ì¡°í•©ì„ [ë‹¤ìŒì²˜ëŸ¼](https://github.com/JungWinter/chatterbox/blob/436da6e8552ef317dff887db0bc0123b101a77c6/tests/test_response.py#L78-L97) í…ŒìŠ¤íŠ¸í–ˆë‹¤. 3ê°œë§Œ ìˆì„ ë•Œ, 2ê°œë§Œ ìˆì„ ë•Œ ê²½ìš°ì˜ ìˆ˜ë¥¼ ì¼ì¼ì´ ì ì–´ì¤¬ëŠ”ë° ë‚˜ì¤‘ì— ìŠ¤í™ì´ ë°”ë€” ë•Œë‚˜ Keyboardì™€ì˜ ì¡°í•©ê¹Œì§€ í…ŒìŠ¤íŠ¸ í•  ìƒê°ì„ í•˜ë‹ˆ ë„ˆë¬´ ìš°ì•„í•˜ì§€ ëª»í–ˆë‹¤. ğŸ’© ë§ˆì¹¨ ìƒê°ë‚¬ë˜ê²Œ `itertools`ì˜ `combinations()`(ì†Œë§ˆ ì½”ë”© ì‹œí—˜ë•Œë„ ë¬´ì²™ ìš”ê¸´í•˜ê²Œ ì‚¬ìš©í–ˆë‹¤.) ì˜€ê³ , iterableì•ˆì— ìˆëŠ” iterable ì›ì†Œë“¤ì„ flatí•˜ê²Œ ì´ì–´ì£¼ëŠ” `chain()`ê³¼ í•¨ìˆ˜í˜•ì˜ ê¸°ë³¸ì¸ `reduce()`ì™€ `map()` ê·¸ë¦¬ê³  curryingì„ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” `functools`ì˜ `partial()`ì— `operator`ì˜ `add`ê¹Œì§€ ì‚¬ìš©í•´ì„œ ê°œì¸ì ìœ¼ë¡œ [ë¬´ì²™ ë§ˆìŒì— ë“œëŠ” í…ŒìŠ¤íŠ¸ êµ¬ë¬¸](https://github.com/JungWinter/chatterbox/blob/436da6e8552ef317dff887db0bc0123b101a77c6/tests/test_response.py#L78-L97)ì„ ë§Œë“¤ ìˆ˜ ìˆì—ˆë‹¤. âœ¨

##### Messageì™€ Keyboardì˜ ì¡°í•© í…ŒìŠ¤íŠ¸
ì˜ˆìƒëŒ€ë¡œ Messageì™€ Keyboardë¥¼ ì¡°í•©í•˜ê²Œ ëë‹¤. MessageëŠ” 3ê°€ì§€ íƒ€ì…ì´ ìˆê³  KeyboardëŠ” 2ê°€ì§€ íƒ€ì…ì´ ìˆë‹¤. ì¼ë‹¨ì€ `Message + Keyboard` í˜•íƒœë¥¼ í…ŒìŠ¤íŠ¸ í•˜ë ¤ í–ˆê³  ì´ë¥¼ ìœ„í•´ `(3 * 2 * 1) * (2 * 1) = 12`ê°€ì§€ì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ í•„ìš”í–ˆë‹¤. ì‹¬ì§€ì–´ ë‚˜ì¤‘ì—” íƒ€ì…ì˜ ê°œìˆ˜ê°€ ë” ëŠ˜ì–´ë‚  ìˆ˜ë„ ìˆë‹¤. ê·¸ë¬ê¸°ì— ì•ì„œ ì‚¬ìš©í–ˆë˜ ë°©ì‹ì—ì„œ matrix ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ ì£¼ëŠ” `itertools`ì˜ `product`ë¥¼ ì‚¬ìš©í•´ [ì§€ì €ë¶„í•œ ì½”ë“œì—†ì´ í…ŒìŠ¤íŠ¸ êµ¬ë¬¸](https://github.com/JungWinter/chatterbox/blob/103170a624e484d585364bff361c448331306e74/tests/test_response.py#L128-L139)ì„ ë§Œë“¤ ìˆ˜ ìˆì—ˆë‹¤.

Messageì™€ Keyboardì˜ ì¡°í•©ì„ êµ¬í˜„ í•  ë•ŒëŠ” ë‘˜ì€ ì„œë¡œ ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜€ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ìƒˆë¡œìš´ ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ìƒì†í•´ì¤˜ì•¼í–ˆë‹¤. ê·¸ë˜ì„œ ìµœì¢…ì ìœ¼ë¡œ Response ëª¨ë“ˆì€ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ë˜ì—ˆë‹¤.
```
Response
â”œâ”€â”€ Message
â”‚   â”œâ”€â”€ Text
â”‚   â”œâ”€â”€ Photo
â”‚   â””â”€â”€ MessageButton
â””â”€â”€ Keyboard
    â”œâ”€â”€ ButtonType
    â””â”€â”€ TextType
```

#### 2ì›” 2ì£¼
##### [Lazy evaluation method chainingí•œ í…ŒìŠ¤íŠ¸](https://github.com/JungWinter/chatterbox/blob/c9b2c1faa7576dd7f7ceb32d780d7570c9426636/tests/test_route.py#L19-L37)
ì œì¼ ì¤‘ìš”í•œ ê¸°ëŠ¥ì¸ `chatter.route()` êµ¬í˜„ì— ë“¤ì–´ê°”ë‹¤. ì—­ì‹œ ì‹œì‘ì€ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±ë¶€í„° ë“¤ì–´ê°”ëŠ”ë° í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¤‘ [ì œì¼ ë§ˆìŒì— ë“œëŠ” ëª¨ìŠµ]((https://github.com/JungWinter/chatterbox/blob/c9b2c1faa7576dd7f7ceb32d780d7570c9426636/tests/test_route.py#L19-L37)ì´ ëë‹¤. ì•„ì‰½ê²Œë„ íŒŒì´ì¬ì—ì„œëŠ” indentê°€ ì¤‘ìš”í•œ ì˜ë¯¸ë¥¼ ê°–ê³ ìˆì–´ ë‹¤ë¥¸ ì–¸ì–´ë“¤ì²˜ëŸ¼ dot methodë¥¼ ì´ì–´ì„œ ì“°ë ¤ë©´ í•œì¤„ì— ì ê±°ë‚˜, `\`ë¥¼ ì‚¬ìš©í•´ ì´ì–´ì£¼ê±°ë‚˜ `()`ë¡œ ê°ì‹¸ëŠ” ìˆ˜ë°–ì— ì—†ë‹¤.

```python
def check_after_route(user_key, response, src, dest, messages, home=False):
    assert ... == src
    assert ... == dest
    assert isinstance(response, Response)
    for msg in messages:
        assert msg in response['message']
    assert 'text' in response['message']
    assert 'keyboard' in response
    if home:
        assert ... == home_keyboard['keyboard']
```

ì²˜ìŒì—” ì•„ë˜ê°™ì´ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ í…ŒìŠ¤íŠ¸ í–ˆëŠ”ë° ì‹¬íˆ ë³´ê¸° ì•ˆì¢‹ì•˜ë‹¤.

```python
check_after_route(user_key, response, 'í™ˆ', 'ì†Œê°œ', ['text'])
check_after_route(user_key, response, 'ì†Œê°œ', 'í™ˆ', ['text', 'photo'], True)
```

ê·¸ë˜ì„œ ì²˜ìŒì—” 

```python
check = checker(chatter).user(user_key)
check.res(res).src('í™ˆ').dest('ì†Œê°œ').msg(['text'])
check.res(res).src('ì†Œê°œ').dest('í™ˆ').msg(['text', 'photo']).home()
check.res(res).src('í™ˆ').dest('í™ˆ').msg(['text', 'button']).home()
```

ìœ„ì™€ ê°™ì´ ì‹ìœ¼ë¡œ ê²€ì‚¬ê¸° ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë‘ê³  ê¹”ë”í•˜ê²Œ methodë¥¼ chainingí•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ê²€ì‚¬í–ˆëŠ”ë° ë§Œì¡±ìŠ¤ëŸ¬ì› ë‹¤.

ë¬¸ì œì ì´ ìˆë‹¤ë©´ `dest('í™ˆ')`, `msg(['text'])`ê°€ ë°˜ë³µëœë‹¤ëŠ” ì ì´ì—ˆê³  ì´ë¥¼ í•´ê²°í•˜ê³ ì `check = checker(self.chatter).user(user_key).dest('í™ˆ').msg(['text']).home()`ì²˜ëŸ¼ ë³´í¸ì ìœ¼ë¡œ ìì£¼ ê²€ì‚¬ë˜ëŠ” í•­ëª©ë¼ë¦¬ ì—®ì–´ ê²€ì‚¬ê¸°ë¥¼ ë§Œë“¤ì–´ì¤€ ë‹¤ìŒ `chatter.route()`ì—ì„œ ë°˜í™˜ëœ responseë¥¼ ì „ë‹¬í•´ ê²€ì‚¬í•˜ë ¤ í–ˆìœ¼ë‚˜ `dest()`, `msg()`, `home()` ë©”ì„œë“œê°€ ì¦‰ì‹œ í‰ê°€ë˜ëŠ” ë°”ëŒì— ë‚´ë¶€ì ìœ¼ë¡œ responseê°€ í•„ìš”í•œ ë¶€ë¶„ì— ì •ë³´ê°€ ì—†ì–´ ì œëŒ€ë¡œ ê²€ì‚¬ê°€ ë˜ì§€ ì•Šì•˜ë‹¤.

ê·¸ë˜ì„œ Lazy chaining method í‚¤ì›Œë“œë¡œ ê²€ìƒ‰í•´ `Chain`ê³¼ `ChainWrapper`ë°©ì‹ìœ¼ë¡œ jsì˜ lodashë¥¼ êµ¬í˜„í•œ [pydash í”„ë¡œì íŠ¸](https://github.com/dgilland/pydash)ë¥¼ ë°œê²¬í–ˆë‹¤. ì†ŒìŠ¤ì—ì„œ ì•„ì´ë””ì–´ë¥¼ ì°¨ìš©í•´ í´ë˜ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ëŠ” [`do()`ë¥¼ evalution triggerë¡œ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸](https://github.com/JungWinter/chatterbox/blob/c9b2c1faa7576dd7f7ceb32d780d7570c9426636/tests/test_route.py#L19-L37)ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆë‹¤.

![ì¢‹ì•„ì„œ ì˜¬ë¦° íŠ¸ìœ— ì‚¬ì§„](https://pbs.twimg.com/media/DVGxLqXU0AE1wG7.png)

##### Text input ì²˜ë¦¬í•˜ê¸°
ì¹´ì¹´ì˜¤í†¡ ìë™ì‘ë‹µ API ìŠ¤í™ì„ ë³´ë©´ ì£¼ê´€ì‹ ë‹µë³€ì„ ë°›ì„ ìˆ˜ ìˆê²Œ Keyboardíƒ€ì…ìœ¼ë¡œ textí˜•ì‹ì´ ìˆë‹¤. ì´ë ‡ê²Œ ë¹„ì •í˜•í™”ëœ ë‹µë³€ì´ ë“¤ì–´ì˜¬ ìˆ˜ë„ ìˆì—ˆê¸°ì— ê¸°ì¡´ ë°©ì‹ì˜ FSMì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆœ ì—†ì—ˆë‹¤. ê·¸ë˜ì„œ ì´ëŸ¬ì €ëŸ¬í•œ ê³ ë¯¼ì„ ë§ì´ í•´ë´¤ëŠ”ë° ì¼ë‹¨ì€ [yieldêµ¬ë¬¸ì„ ì´ìš©í•œ ë°©ì‹](https://github.com/JungWinter/chatterbox/blob/6cd0b7dd663b7585d0bba7d860ff52078bf67b5f/tests/test_route.py#L62-L112)ì„ ì‚¬ìš©í•˜ê³ ìí•œë‹¤. ë‚´ê°€ ìƒê°í•˜ê¸°ì— ìµœëŒ€í•œ ê¹”ë”í•œ ë°©ì‹ê°™ë‹¤. (ê·¸ëŸ¬ë‚˜ ì§€ê¸ˆì€ ì™„ì „ ì˜ëª»ëë‹¤ëŠ” ê±¸ ì•Œì•˜ì§€ë§Œ ì´ëŠ” ë‚˜ì¤‘ì— í¬ìŠ¤íŒ…í•˜ëŠ” ê±¸ë¡œ...)

##### `route()` êµ¬í˜„
Red - Green - Refactor ë°©ì‹ì„ ë”°ë¼ì„œ ì²˜ìŒì—” ì™„ì „ ë‚ ë¡œ ì¼ë‹¤. ([ì†ŒìŠ¤](https://github.com/JungWinter/chatterbox/blob/08a8bb5f44ec5876c4683c298c5ef18d11c41c3a/chatterbox/chatter.py#L31-L91)) ì´ë¥¼ 1ì°¨ì ìœ¼ë¡œ ê°œì„ í–ˆëŠ”ë° êµ°ë°êµ°ë° side effectê°€ ë°œìƒí•˜ê³  text input contextë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²• ë“±ì´ ë§ˆìŒì— ë“¤ì§„ ì•ŠëŠ” ìƒíƒœë‹¤. ([ì†ŒìŠ¤](https://github.com/JungWinter/chatterbox/blob/d0624313993a24b70a676080f6e190c4370a2495/chatterbox/chatter.py#L37-L67)) 2ì°¨ì ìœ¼ë¡œëŠ” ruleì„ ì°¾ëŠ” í–‰ìœ„ë¥¼ Ruleê°ì²´ì—ê²Œ ì–‘ë„í•˜ê³  contextë¥¼ í´ë˜ìŠ¤ë¡œ ë³€ê²½í•˜ê³  state updateì— ì¼ê´€ì„±ì„ ì£¼ì–´ êµ°ì‚´ì„ ë” ëºë‹¤. ([ì†ŒìŠ¤](https://github.com/JungWinter/chatterbox/blob/2ede9975fc06f69c313073e1b39ff44aa770ebf5/chatterbox/chatter.py#L48-L73))

##### Rule ë™ì‘ ë³€ê²½
[SQLAlchemyì²˜ëŸ¼ ë™ì‘](https://github.com/JungWinter/chatterbox/blob/8e74f3a8467650dfa04a44734714edb4d3eaf1c3/tests/test_chatter.py#L47-L53)í•˜ë„ë¡ ë°”ê¿¨ë‹¤. `action()`, `src()`, `dest()`ë©”ì„œë“œë¡œ í•„í„°ëœ ê²°ê³¼ë¥¼ í¬í•¨í•˜ëŠ” `Rule`ê°ì²´ê°€ ë°˜í™˜ë˜ê³  `one()`, `first()`, `all()`ë¡œ ê·¸ ê²°ê³¼ë¥¼ ë°›ì•„ë³¼ ìˆ˜ ìˆë‹¤.


## ë‹¤ìŒì£¼ ê³„íš ğŸ“…
- ì´ë ¥ì„œ ì—…ë°ì´íŠ¸ (ì´ë²ˆì—” ì§„ì§œë¡œ)
- í•¨ìˆ˜í˜• íŒ¨ëŸ¬ë‹¤ì„ ì ìš©ì‹œì¼œë³¸ ê²½í—˜ í¬ìŠ¤íŒ…
- chatterbox ìŠ¤í™ ë³€ê²½ ì‚¬í•­ ë¬¸ì„œí™”
